import './polyfills.server.mjs';
import{a as W}from"./chunk-3OSYDLHB.mjs";import{a as K}from"./chunk-DQSTNXRE.mjs";import{a as z}from"./chunk-VMFSIC44.mjs";import{a as B}from"./chunk-HN4KB7UB.mjs";import"./chunk-D6UB7EIH.mjs";import{a as w}from"./chunk-ALZNOHOH.mjs";import{b as M,c as f,d as P,e as j,g as V,h as q,i as D,j as k,k as R,l as A,m as G,n as O,o as H}from"./chunk-ERNF2WY3.mjs";import"./chunk-MJJAFQCG.mjs";import{a as T}from"./chunk-7DPT6SHR.mjs";import{C as N,g as I,i as F,z as L}from"./chunk-XI4GD5BT.mjs";import{Ea as a,Fa as u,Qa as v,Sa as s,Ua as E,Y as b,Ya as i,Za as e,_a as h,bb as C,cb as S,db as p,fa as g,ga as _,hb as n,jb as c,nb as y}from"./chunk-W2FOEFF4.mjs";import{h as x}from"./chunk-5XUXGTUW.mjs";function X(o,m){o&1&&(i(0,"p",15),n(1,"Loader"),e())}function Z(o,m){if(o&1&&(i(0,"div",35),n(1),e()),o&2){let l=p(2);a(),c(" ",l.myFormService.getErrorMessage("title")," ")}}function $(o,m){if(o&1&&(i(0,"div",35),n(1),e()),o&2){let l=p(2);a(),c(" ",l.myFormService.getErrorMessage("status")," ")}}function tt(o,m){if(o&1&&(i(0,"div",35),n(1),e()),o&2){let l=p(2);a(),c(" ",l.myFormService.getErrorMessage("featured")," ")}}function et(o,m){if(o&1&&(i(0,"div",35),n(1),e()),o&2){let l=p(2);a(),c(" ",l.myFormService.getErrorMessage("thumbnail")," ")}}function it(o,m){if(o&1&&(i(0,"div",35),n(1),e()),o&2){let l=p(2);a(),c(" ",l.myFormService.getErrorMessage("short_description")," ")}}function ot(o,m){if(o&1&&(i(0,"div",35),n(1),e()),o&2){let l=p(2);a(),c(" ",l.myFormService.getErrorMessage("long_description")," ")}}function nt(o,m){if(o&1){let l=C();i(0,"form",17),S("ngSubmit",function(){g(l);let d=p();return _(d.onSubmit())}),i(1,"div",18)(2,"div",19)(3,"div",20)(4,"label",21),n(5),e(),h(6,"input",22),v(7,Z,2,1,"div",23),e()(),i(8,"div",19)(9,"div",20)(10,"label",21),n(11,"Status"),e(),i(12,"select",24)(13,"option",25),n(14,"Select Status"),e(),i(15,"option",26),n(16,"Enable"),e(),i(17,"option",27),n(18,"Disable"),e()(),v(19,$,2,1,"div",23),e()(),i(20,"div",19)(21,"div",20)(22,"label",21),n(23,"Is Featured"),e(),i(24,"select",28)(25,"option",25),n(26,"Select Featured"),e(),i(27,"option",26),n(28,"Yes"),e(),i(29,"option",27),n(30,"No"),e()(),v(31,tt,2,1,"div",23),e()(),i(32,"div",19)(33,"div",20)(34,"label",21),n(35),e(),i(36,"app-img-uploader",29),S("imgHanle",function(d){g(l);let r=p();return _(r.form.controls.thumbnail.patchValue(d.path))}),e(),v(37,et,2,1,"div",23),e()(),i(38,"div",30)(39,"div",20)(40,"label",21),n(41),e(),h(42,"input",31),v(43,it,2,1,"div",23),e()(),i(44,"div",30)(45,"div",20)(46,"label",21),n(47),e(),h(48,"editor",32),v(49,ot,2,1,"div",23),e()(),i(50,"div",33)(51,"button",34),n(52,"Submit"),e()()()()}if(o&2){let l,t=p();s("formGroup",t.form),a(5),c("Title (",t.lang.lang,")"),a(2),s("ngIf",t.form.controls.title.invalid&&(t.form.controls.title.dirty||t.form.controls.title.touched)),a(12),s("ngIf",t.form.controls.status.invalid&&(t.form.controls.status.dirty||t.form.controls.status.touched)),a(12),s("ngIf",t.form.controls.featured.invalid&&(t.form.controls.featured.dirty||t.form.controls.featured.touched)),a(4),c("Thumbnail (",t.lang.lang,")"),a(),s("image",(l=t.form.controls.thumbnail.value)!==null&&l!==void 0?l:""),a(),s("ngIf",t.form.controls.thumbnail.invalid&&(t.form.controls.thumbnail.dirty||t.form.controls.thumbnail.touched)),a(4),c("Short Description (",t.lang.lang,")"),a(2),s("ngIf",t.form.controls.short_description.invalid&&(t.form.controls.short_description.dirty||t.form.controls.short_description.touched)),a(4),c("Long Description (",t.lang.lang,")"),a(),s("init",t.init),a(),s("ngIf",t.form.controls.long_description.invalid&&(t.form.controls.long_description.dirty||t.form.controls.long_description.touched)),a(2),s("disabled",t.formLoader)}}var xt=(()=>{let m=class m{constructor(t,d,r,U,Y,J,Q){this.fb=t,this.notification=d,this.myFormService=r,this.service=U,this.route=Y,this.router=J,this.lang=Q,this.formLoader=!1,this.editId="",this.init={menubar:!0,plugins:"lists link image table code help wordcount"},this.form=this.fb.group({title:["",[f.required,f.maxLength(100)]],short_description:["",[f.required,f.maxLength(200)]],thumbnail:["",f.required],featured:["",f.required],status:["",f.required],long_description:["",[f.required,f.maxLength(100)]]}),this.myFormService.setForm(this.form)}ngOnInit(){this.route.paramMap.subscribe(t=>{this.editId=t.get("id"),this.getRecord(this.editId)})}getRecord(t){return x(this,null,function*(){this.formLoader=!0,this.service.edit(Number(this.editId)).subscribe({next:d=>{let r=d.data;this.form.patchValue({title:r.title,short_description:r.short_description,long_description:r.long_description,thumbnail:r.thumbnail,status:r.status,featured:r.is_featured}),this.formLoader=!1},error:d=>{let r=d.error;r?r.errors?this.notification.error(Object.values(r.errors)[0]):this.notification.error(r.message):this.notification.error("Something Went Wrong"),this.formLoader=!1,this.router.navigate(["/admin/dashboard"])}})})}onSubmit(){return x(this,null,function*(){if(this.form.valid){let t=this.form.value;t.type="post",t.id=this.editId,this.formLoader=!0,this.service.update(t).subscribe({next:d=>{this.formLoader=!1,this.notification.success(d.message),this.getRecord(this.editId),this.formLoader=!1},error:d=>{let r=d.error;r?r.errors?this.notification.error(Object.values(r.errors)[0]):this.notification.error(r.message):this.notification.error("Something Went Wrong"),this.formLoader=!1}})}else this.formLoader=!1,this.form.markAllAsTouched(),this.notification.error("Validation Failed")})}};m.\u0275fac=function(d){return new(d||m)(u(G),u(T),u(K),u(W),u(L),u(N),u(w))},m.\u0275cmp=b({type:m,selectors:[["app-post-edit"]],standalone:!0,features:[y],decls:21,vars:1,consts:[[1,"row","page-titles"],[1,"col-md-5","align-self-center"],[1,"text-themecolor"],[1,"col-md-7","align-self-center","text-end"],[1,"d-flex","justify-content-end","align-items-center"],[1,"breadcrumb","justify-content-end"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"breadcrumb-item","active"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","bg-info"],[1,"mb-0","text-white"],[1,"card-body"],[1,"text-center"],[3,"formGroup"],[3,"ngSubmit","formGroup"],[1,"row","pt-3"],[1,"col-md-6"],[1,"form-group"],[1,"form-label"],["formControlName","title","placeholder","Title",1,"form-control"],["class","text-danger",4,"ngIf"],["formControlName","status",1,"form-control"],["value",""],["value","1"],["value","0"],["formControlName","featured",1,"form-control"],[3,"imgHanle","image"],[1,"col-md-12"],["formControlName","short_description","placeholder","Short Description",1,"form-control"],["formControlName","long_description","apiKey","k0xxzqob8133dq0xmi8vlaaxcmhpjisrkp7pmwtbdxwunkk9",3,"init"],[1,"col-md-12","text-center"],["type","submit",1,"btn","btn-info","text-white",3,"disabled"],[1,"text-danger"]],template:function(d,r){d&1&&(i(0,"div",0)(1,"div",1)(2,"h4",2),n(3,"Edit Post"),e()(),i(4,"div",3)(5,"div",4)(6,"ol",5)(7,"li",6)(8,"a",7),n(9,"Home"),e()(),i(10,"li",8),n(11,"Posts"),e()()()()(),i(12,"div",9)(13,"div",10)(14,"div",11)(15,"div",12)(16,"h4",13),n(17,"Edit Post Form"),e()(),i(18,"div",14),v(19,X,2,0,"p",15)(20,nt,53,14,"form",16),e()()()()),d&2&&(a(19),E(r.formLoader?19:20))},dependencies:[F,I,H,V,R,A,M,k,P,j,q,D,z,O,B],encapsulation:2});let o=m;return o})();export{xt as PostEditComponent};
