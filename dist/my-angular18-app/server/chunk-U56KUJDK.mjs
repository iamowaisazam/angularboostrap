import './polyfills.server.mjs';
import{a as j}from"./chunk-DQSTNXRE.mjs";import"./chunk-VMFSIC44.mjs";import{a as O}from"./chunk-D6UB7EIH.mjs";import{a as M}from"./chunk-ALZNOHOH.mjs";import{e as q,f as B,g as G,k as H,l as J,n as k,o as T}from"./chunk-ERNF2WY3.mjs";import"./chunk-MJJAFQCG.mjs";import{a as w}from"./chunk-7DPT6SHR.mjs";import{f as Q,h as $,i as E}from"./chunk-XI4GD5BT.mjs";import{Ea as d,Fa as h,Qa as _,Sa as f,Ua as g,Va as D,Wa as z,Xa as L,Y as S,Ya as t,Za as e,_a as c,bb as F,cb as p,db as u,eb as U,fa as v,fb as W,ga as x,gb as R,hb as r,ib as C,la as P,nb as y,ob as I,pb as A,za as b}from"./chunk-W2FOEFF4.mjs";import{h as V}from"./chunk-5XUXGTUW.mjs";var ne=a=>({show:a}),le=()=>({display:"block"}),oe=()=>({"padding-left":"0px"});function re(a,s){a&1&&(t(0,"p",9),r(1,"Loading"),e())}function ae(a,s){if(a&1){let o=F();t(0,"button",21),p("click",function(){v(o);let i=u(3);return x(i.clearFile())}),r(1,"x"),e()}}function se(a,s){if(a&1){let o=F();t(0,"div",12)(1,"div",13)(2,"label",14),r(3,"Image"),e(),t(4,"div",18)(5,"input",19,0),p("change",function(i){v(o);let n=u(2);return x(n.onFileSelected(i))}),e(),_(7,ae,2,0,"button",20),e()()()}if(a&2){let o=u(2);d(7),g(o.selectedFile?7:-1)}}function de(a,s){if(a&1&&(t(0,"div",22)(1,"div",23)(2,"label",14),r(3,"File Preview"),e(),t(4,"div",24),c(5,"img",25),e()()(),t(6,"div",22)(7,"div",13)(8,"label",14),r(9,"File Name"),e(),c(10,"input",26),e(),t(11,"div",13)(12,"label",14),r(13,"File Size"),e(),c(14,"input",26),e(),t(15,"div",13)(16,"label",14),r(17,"File Type"),e(),c(18,"input",26),e(),t(19,"div",13)(20,"label",14),r(21,"File Extension"),e(),c(22,"input",26),e()()),a&2){let o=u(2);d(5),f("src",o.file.url,b),d(5),f("value",o.file==null?null:o.file.name),d(4),f("value",o.file==null?null:o.file.size),d(4),f("value",o.file==null?null:o.file.type),d(4),f("value",o.file==null?null:o.file.extension)}}function me(a,s){if(a&1){let o=F();t(0,"div",10),_(1,se,8,1,"div",12),t(2,"div",12)(3,"div",13)(4,"label",14),r(5,"File Name"),e(),t(6,"input",15),p("input",function(i){v(o);let n=u();return x(n.setFileName(i.target.value))}),e()()(),_(7,de,23,5),t(8,"div",16)(9,"button",17),r(10),e()()()}if(a&2){let o=u();d(),g(o.is_edit?-1:1),d(5),f("value",o.filename),d(),g(o.file.url?7:-1),d(3),C(o.is_edit?"Update":"Upload")}}function ce(a,s){a&1&&c(0,"div",11)}var N=(()=>{let s=class s{constructor(l,i,n,m){this.notification=l,this.myFormService=i,this.lang=n,this.service=m,this.getFiles=new P,this.loader=!1,this.modal=!1,this.is_edit=!1,this.file={},this.selectedFile=null,this.filename=""}handleModal(){this.modal=!this.modal,this.modal==!1&&(this.is_edit=!1,this.clearFile())}clearFile(){this.loader=!0,this.selectedFile=null,this.filename=null,this.file={},this.loader=!1}onFileSelected(l){let i=l.target;if(i.files&&i.files.length>0){this.selectedFile=i.files[0];let n=new FileReader;n.onload=m=>{i.value="",this.file={name:this.selectedFile?.name,size:this.selectedFile?.size,type:this.selectedFile?.type,extension:this.selectedFile?.name?.split(".")?.pop(),url:n.result},this.setFileName(this.file.name)},n.readAsDataURL(this.selectedFile)}}setFileName(l){this.filename=l}onSubmit(){return V(this,null,function*(){if(!this.is_edit)if(this.selectedFile){let l=new FormData;l.append("filename",this.filename),l.append("file",this.selectedFile,this.selectedFile.name),this.loader=!0,this.service.create(l).subscribe({next:i=>{this.notification.success(i.message),this.loader=!1,this.selectedFile=null,this.filename=null,this.file={},this.modal=!1,this.getFiles.emit()},error:i=>{let n=i.error;n?n.errors?this.notification.error(Object.values(n.errors)[0]):this.notification.error(n.message):this.notification.error("Something Went Wrong"),this.loader=!1}})}else this.notification.error("File Not Found");if(this.is_edit){let l={id:this.file.id,name:this.filename};this.service.update(l).subscribe({next:i=>{this.notification.success(i.message),this.loader=!1,this.selectedFile=null,this.filename=null,this.file={},this.modal=!1,this.getFiles.emit()},error:i=>{let n=i.error;n?n.errors?this.notification.error(Object.values(n.errors)[0]):this.notification.error(n.message):this.notification.error("Something Went Wrong"),this.loader=!1}})}})}};s.\u0275fac=function(i){return new(i||s)(h(w),h(j),h(M),h(O))},s.\u0275cmp=S({type:s,selectors:[["app-file-modal"]],outputs:{getFiles:"getFiles"},standalone:!0,features:[y],decls:12,vars:8,consts:[["inputfield",""],["tabindex","-1","aria-labelledby","myLargeModalLabel","aria-modal","true","role","dialog",1,"modal","bs-example-modal-lg",3,"ngClass","ngStyle"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","myLargeModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-hidden","true",1,"btn-close",3,"click"],[1,"modal-body"],["enctype","multipart/form-data",3,"ngSubmit"],[1,"text-center"],[1,"row"],[1,"modal-backdrop","show"],[1,"col-md-12"],[1,"form-group"],[1,"form-label"],[1,"form-control",3,"input","value"],[1,"col-md-12","text-center"],["type","submit",1,"btn","btn-info","text-white"],[1,"d-flex"],["placeholder","Image","type","file",1,"form-control",3,"change"],[1,"btn","btn-danger"],[1,"btn","btn-danger",3,"click"],[1,"col-md-6"],[1,"col-md-12","pb-3"],[1,"img_holder"],[1,"w-100",3,"src"],["readonly","",1,"form-control",3,"value"]],template:function(i,n){i&1&&(t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"h4",5),r(5,"Filemanager"),e(),t(6,"button",6),p("click",function(){return n.handleModal()}),e()(),t(7,"div",7)(8,"form",8),p("ngSubmit",function(){return n.onSubmit()}),_(9,re,2,0,"p",9)(10,me,11,4,"div",10),e()()()()(),_(11,ce,1,0,"div",11)),i&2&&(f("ngClass",A(4,ne,n.modal))("ngStyle",n.modal?I(6,le):I(7,oe)),d(9),g(n.loader?9:10),d(2),g(n.modal?11:-1))},dependencies:[E,Q,$,T,G,q,k,B],encapsulation:2});let a=s;return a})();function pe(a,s){a&1&&(t(0,"p",29),r(1,"Loading"),e())}function fe(a,s){if(a&1){let o=F();t(0,"tr")(1,"td"),r(2),e(),t(3,"td"),c(4,"img",34),e(),t(5,"td")(6,"a",35),r(7),e()(),t(8,"td"),r(9),e(),t(10,"td",33)(11,"div",36)(12,"a",37),p("click",function(){let i=v(o).$implicit,n=u(2);return x(n.onEdit(i))}),c(13,"i",38),e(),t(14,"a",39),p("click",function(){let i=v(o).$implicit,n=u(2);return x(n.delete(i.id))}),c(15,"i",40),e()()()()}if(a&2){let o=s.$implicit;d(2),C(o.id),d(2),f("src",o.link,b),d(2),f("href",o.link,b),d(),C(o.name),d(2),C(o.extension)}}function ue(a,s){if(a&1&&(t(0,"div",30)(1,"table",31)(2,"thead",32)(3,"tr")(4,"th",29),r(5,"#"),e(),t(6,"th",29),r(7,"Image"),e(),t(8,"th",29),r(9,"Title"),e(),t(10,"th",29),r(11,"Extension"),e(),t(12,"th",33),r(13,"Action"),e()()(),t(14,"tbody",32),z(15,fe,16,5,"tr",null,D),e()()()),a&2){let o=u();d(15),L(o.files)}}var we=(()=>{let s=class s{constructor(l,i,n,m){this.notification=l,this.myFormService=i,this.lang=n,this.service=m,this.search="",this.fileDropdown=!1,this.loader=!1,this.files=[]}ngOnInit(){this.getFiles()}hanldeSearch(l){let i=l.target.value;this.search=i,this.getFiles()}getFiles(){this.loader=!0,this.service.list({search:this.search}).subscribe({next:l=>{this.files=l.data.data,this.loader=!1},error:l=>{this.loader=!1}})}handle_fileDropdown(){this.fileDropdown=!this.fileDropdown}delete(l){this.service.delete(l).subscribe({next:i=>{this.notification.success(i.message),this.loader=!1,this.getFiles()},error:i=>{let n=i.error;n?n.errors?this.notification.error(Object.values(n.errors)[0]):this.notification.error(n.message):this.notification.error("Something Went Wrong"),this.loader=!1}})}onEdit(l){this.FileModalComponent.modal=!0,this.FileModalComponent.is_edit=!0,this.FileModalComponent.filename=l.name,this.FileModalComponent.file={name:l.name,size:l.size,extension:l.extension,type:l.type,url:l.link,id:l.id}}};s.\u0275fac=function(i){return new(i||s)(h(w),h(j),h(M),h(O))},s.\u0275cmp=S({type:s,selectors:[["app-filemanager"]],viewQuery:function(i,n){if(i&1&&U(N,5),i&2){let m;W(m=R())&&(n.FileModalComponent=m.first)}},standalone:!0,features:[y],decls:43,vars:1,consts:[[1,"row","page-titles"],[1,"col-md-5","align-self-center"],[1,"text-themecolor"],[1,"col-md-7","align-self-center","text-end"],[1,"d-flex","justify-content-end","align-items-center"],[1,"breadcrumb","justify-content-end"],[1,"breadcrumb-item"],["href","javascript:void(0)"],[1,"breadcrumb-item","active"],[3,"getFiles"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","bg-info","d-flex","justify-content-between","justify-content-center","align-items-center"],[1,"mb-0","text-white"],[1,"btn","btn-primary",3,"click"],[1,"card-body","p-4"],[1,"d-flex","justify-content-between"],[1,""],[1,"d-flex","justify-content-center","align-items-center"],[1,"m-0","px-1"],["name","example23_length","aria-controls","example23",1,"border","form-control","form-control-sm",2,"width","40px"],["value","10"],["value","25"],["value","50"],["value","100"],["value","200"],[1,"m-0","w-100","px-1"],["placeholder","Search Here..","type","text",1,"form-control",3,"keydown"],[1,"text-center"],[1,"pt-4","table-responsive"],[1,"table","border","table-striped"],[1,"text-nowrap","text-truncate"],[1,"text-nowrap"],[2,"width","50px","height","50px",3,"src"],["target","_blank",3,"href"],[1,"bt-group"],["title","Edit",1,"btn","btn-info","text-white",3,"click"],[1,"icon","mdi","mdi-grease-pencil"],["title","Delete",1,"btn","btn-danger","text-white",3,"click"],[1,"icon","mdi","mdi-delete"]],template:function(i,n){i&1&&(t(0,"div",0)(1,"div",1),c(2,"h4",2),e(),t(3,"div",3)(4,"div",4)(5,"ol",5)(6,"li",6)(7,"a",7),r(8,"Admin"),e()(),t(9,"li",8),r(10,"Filemanager"),e()()()()(),t(11,"app-file-modal",9),p("getFiles",function(){return n.getFiles()}),e(),t(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"h4",14),r(17,"Filemanager"),e(),t(18,"a",15),p("click",function(){return n.FileModalComponent.modal=!0}),r(19,"Add New"),e()(),t(20,"div",16)(21,"div",17)(22,"div",18)(23,"div",19)(24,"p",20),r(25,"Show "),e(),t(26,"select",21)(27,"option",22),r(28,"10"),e(),t(29,"option",23),r(30,"25"),e(),t(31,"option",24),r(32,"50"),e(),t(33,"option",25),r(34,"100"),e(),t(35,"option",26),r(36,"200"),e()(),t(37,"p",27),r(38,"1 to 10 of 1 entries"),e()()(),t(39,"div",18)(40,"input",28),p("keydown",function(K){return n.hanldeSearch(K)}),e()()(),_(41,pe,2,0,"p",29)(42,ue,17,0,"div",30),e()()()()),i&2&&(d(41),g(n.loader==!0?41:42))},dependencies:[E,T,H,J,k,N],styles:[".img_holder[_ngcontent-%COMP%]{height:200px;width:200px}.dropdown[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{right:0}.el-overlay-1[_ngcontent-%COMP%]{position:relative}.el-overlay-1[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:250px}.el-overlay[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;overflow:hidden;top:0;left:0;opacity:0;background-color:#000000b3;-webkit-transition:all .4s ease-in-out;transition:all .4s ease-in-out}.el-overlay[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{color:#fff;list-style:none;height:100%;display:flex;align-items:center;justify-content:center;padding:0;margin:0}.el-overlay[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.el-card-avatar[_ngcontent-%COMP%]:hover   .el-overlay[_ngcontent-%COMP%]{opacity:1}"]});let a=s;return a})();export{we as FilemanagerComponent};
